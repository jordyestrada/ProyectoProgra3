<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Line?>

  Formulario de Reserva
  Sistema de Reservas - Municipalidad de Pérez Zeledón
  
  Estructura:
  - BorderPane con Navbar y Sidebar
  - Centro: VBox con título, stepper (3 pasos) y formularios por paso
-->

<BorderPane fx:id="rootPane" prefWidth="1440.0" prefHeight="900.0" 
            styleClass="border-pane-root"
            stylesheets="@../styles.css"
            xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="cr.una.reservas.frontend.ui.ReservaFormController">
    
    
    <top>
        <HBox styleClass="navbar" alignment="CENTER_LEFT" spacing="16.0" prefHeight="72.0">
            <ImageView fitHeight="40.0" preserveRatio="true">
                
            </ImageView>
            <Label text="Sistema de Reservas" styleClass="navbar-title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="🔔" styleClass="button-icon"/>
            <Label text="Usuario" styleClass="navbar-user"/>
        </HBox>
    </top>
    
    
    <left>
        <VBox styleClass="sidebar" spacing="8.0" prefWidth="280.0">
            
            <VBox styleClass="sidebar-user-info" alignment="CENTER" spacing="8.0">
                <ImageView styleClass="sidebar-avatar" fitWidth="64.0" fitHeight="64.0" preserveRatio="true"/>
                <Label text="Usuario" styleClass="sidebar-username"/>
                <Label text="Cliente" styleClass="sidebar-role"/>
            </VBox>
            <Separator/>
            
            
            <Button text="📊 Dashboard" styleClass="menu-item" maxWidth="Infinity" alignment="CENTER_LEFT"/>
            <Button text="🏢 Espacios" styleClass="menu-item" maxWidth="Infinity" alignment="CENTER_LEFT"/>
            <Button text="📅 Mis Reservas" styleClass="menu-item, menu-item-active" maxWidth="Infinity" alignment="CENTER_LEFT"/>
            <Button text="📆 Calendario" styleClass="menu-item" maxWidth="Infinity" alignment="CENTER_LEFT"/>
            <Button text="⚙️ Configuración" styleClass="menu-item" maxWidth="Infinity" alignment="CENTER_LEFT"/>
        </VBox>
    </left>
    
    
    <center>
        <VBox styleClass="content-container" spacing="32.0" alignment="TOP_CENTER">
            <padding>
                <Insets top="32" right="32" bottom="32" left="32"/>
            </padding>
            
            
            <Label text="Nueva Reserva" styleClass="text-h2"/>
            
            
            <HBox alignment="CENTER" spacing="16.0" prefHeight="80.0">
                
                <VBox alignment="CENTER" spacing="8.0">
                    <Label fx:id="step1Circle" text="1" styleClass="step-circle, step-circle-active"/>
                    <Label fx:id="step1Label" text="Fecha y Hora" styleClass="step-label-active"/>
                </VBox>
                
                
                <Line fx:id="connector1" endX="80.0" strokeWidth="2.0" stroke="#10b981" 
                      styleClass="step-connector, step-connector-complete"/>
                
                
                <VBox alignment="CENTER" spacing="8.0">
                    <Label fx:id="step2Circle" text="2" styleClass="step-circle, step-circle-inactive"/>
                    <Label fx:id="step2Label" text="Detalles" styleClass="step-label-inactive"/>
                </VBox>
                
                
                <Line fx:id="connector2" endX="80.0" strokeWidth="2.0" stroke="#e2e8f0" 
                      styleClass="step-connector, step-connector-incomplete"/>
                
                
                <VBox alignment="CENTER" spacing="8.0">
                    <Label fx:id="step3Circle" text="3" styleClass="step-circle, step-circle-inactive"/>
                    <Label fx:id="step3Label" text="Confirmación" styleClass="step-label-inactive"/>
                </VBox>
            </HBox>
            
            
            <StackPane maxWidth="700.0">
                
                <VBox fx:id="step1Form" styleClass="form-container" spacing="24.0">
                    
                    <Label text="Selecciona la fecha y horario de tu reserva" styleClass="text-muted"/>
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Fecha" styleClass="label-form"/>
                        <DatePicker fx:id="fechaPicker" maxWidth="Infinity" prefHeight="48.0"
                                    onAction="#handleFechaChange"
                                    styleClass="date-picker">
                        </DatePicker>
                    </VBox>
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Hora de Inicio" styleClass="label-form"/>
                        <ComboBox fx:id="horaInicioCombo" maxWidth="Infinity" prefHeight="48.0"
                                  onAction="#handleHoraChange"
                                  styleClass="combo-box">
                        </ComboBox>
                    </VBox>
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Hora de Fin" styleClass="label-form"/>
                        <ComboBox fx:id="horaFinCombo" maxWidth="Infinity" prefHeight="48.0"
                                  onAction="#handleHoraChange"
                                  styleClass="combo-box">
                        </ComboBox>
                    </VBox>
                    
                    
                    <Label fx:id="duracionLabel" text="Duración: - horas" styleClass="label-bold" style="-fx-text-fill: #0066cc;"/>
                    
                    
                    <HBox spacing="16.0" alignment="CENTER_RIGHT">
                        <padding>
                            <Insets top="16"/>
                        </padding>
                        
                        <Button fx:id="step1NextBtn" text="Siguiente →" 
                                onAction="#handleStep1Next"
                                styleClass="button-primary"
                                prefWidth="160.0" prefHeight="48.0">
                        </Button>
                    </HBox>
                </VBox>
                
                
                <VBox fx:id="step2Form" styleClass="form-container" spacing="24.0" visible="false" managed="false">
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Propósito de la Reserva" styleClass="label-form"/>
                        <TextField fx:id="propositoField" maxWidth="Infinity" prefHeight="48.0"
                                   promptText="Ej: Reunión comunitaria"
                                   styleClass="text-input">
                        </TextField>
                    </VBox>
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Número de Personas" styleClass="label-form"/>
                        <TextField fx:id="numPersonasField" maxWidth="Infinity" prefHeight="48.0"
                                   promptText="Ej: 50"
                                   styleClass="text-input">
                        </TextField>
                    </VBox>
                    
                    
                    <VBox spacing="8.0">
                        <Label text="Descripción (Opcional)" styleClass="label-form"/>
                        <TextArea fx:id="descripcionArea" maxWidth="Infinity" prefHeight="120.0"
                                  promptText="Detalles adicionales sobre el evento..."
                                  wrapText="true"
                                  styleClass="text-area">
                        </TextArea>
                    </VBox>
                    
                    
                    <CheckBox fx:id="requiereEquipoCheck" text="Requiero equipo adicional (proyector, sonido, etc.)"
                              styleClass="check-box">
                    </CheckBox>
                    
                    
                    <HBox spacing="16.0" alignment="CENTER_RIGHT">
                        <padding>
                            <Insets top="16"/>
                        </padding>
                        
                        <Button fx:id="step2BackBtn" text="← Anterior" 
                                onAction="#handleStep2Back"
                                styleClass="button-secondary"
                                prefWidth="120.0" prefHeight="48.0">
                        </Button>
                        
                        <Button fx:id="step2NextBtn" text="Siguiente →" 
                                onAction="#handleStep2Next"
                                styleClass="button-primary"
                                prefWidth="160.0" prefHeight="48.0">
                        </Button>
                    </HBox>
                </VBox>
                
                
                <VBox fx:id="step3Form" styleClass="form-container" spacing="24.0" visible="false" managed="false">
                    
                    
                    <VBox styleClass="resumen-container" spacing="16.0">
                        <Label text="Resumen de Reserva" styleClass="text-h4"/>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Espacio:" styleClass="resumen-label"/>
                            <Label fx:id="resumenEspacio" text="Salón de Eventos" styleClass="resumen-value"/>
                        </HBox>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Fecha:" styleClass="resumen-label"/>
                            <Label fx:id="resumenFecha" text="-" styleClass="resumen-value"/>
                        </HBox>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Horario:" styleClass="resumen-label"/>
                            <Label fx:id="resumenHorario" text="-" styleClass="resumen-value"/>
                        </HBox>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Duración:" styleClass="resumen-label"/>
                            <Label fx:id="resumenDuracion" text="-" styleClass="resumen-value"/>
                        </HBox>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Propósito:" styleClass="resumen-label"/>
                            <Label fx:id="resumenProposito" text="-" wrapText="true" styleClass="resumen-value"/>
                        </HBox>
                        
                        
                        <HBox spacing="12.0" alignment="CENTER_LEFT">
                            <Label text="Personas:" styleClass="resumen-label"/>
                            <Label fx:id="resumenPersonas" text="-" styleClass="resumen-value"/>
                        </HBox>
                    </VBox>
                    
                    
                    <CheckBox fx:id="terminosCheck" wrapText="true"
                              text="Acepto los términos y condiciones de uso del espacio y me comprometo a seguir las normas establecidas por la municipalidad."
                              styleClass="check-box">
                    </CheckBox>
                    
                    
                    <HBox spacing="16.0" alignment="CENTER_RIGHT">
                        <padding>
                            <Insets top="16"/>
                        </padding>
                        
                        <Button fx:id="step3BackBtn" text="← Anterior" 
                                onAction="#handleStep3Back"
                                styleClass="button-secondary"
                                prefWidth="120.0" prefHeight="48.0">
                        </Button>
                        
                        <Button fx:id="confirmarBtn" text="Confirmar Reserva" 
                                onAction="#handleConfirmar"
                                styleClass="button-primary"
                                prefWidth="180.0" prefHeight="48.0">
                        </Button>
                    </HBox>
                </VBox>
            </StackPane>
        </VBox>
    </center>
    
</BorderPane>